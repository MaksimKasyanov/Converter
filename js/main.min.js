const keyboardValues=document.querySelectorAll(".keyboard .keyboard__btn"),dotBtn=document.querySelector(".keyboard__dot"),equal=document.querySelector(".keyboard__equal"),amount=document.querySelector(".form__amount"),resultCalc=document.querySelector(".form__result-calc"),convertResult=document.querySelector(".form__result-convert");function getKeyboardValues(){for(let a=0;a<keyboardValues.length;a++)keyboardValues[a].addEventListener("click",writeValue)}function writeValue(){"keyboard keyboard_active"!==keyboard.className&&(resultCalc.innerHTML+=this.value,inputValidation(),convertCurrencies()),"keyboard keyboard_active"===keyboard.className&&(amount.value+=this.value,inputValidation(),convertCurrencies())}function inputValidation(){const a=resultCalc.innerHTML.split(/[-+*\/]/g).filter(a=>a),e=resultCalc.innerHTML.split(/[\d\.]/g).filter(a=>a).map(a=>1===a.length?a:a.split("").pop());resultCalc.innerHTML=merge(a,e)}function merge(a,e){for(let n=0;a.length;)e.splice(2*n++,0,a.shift());return e.join("")}function calculateTotal(){resultCalc.innerHTML=amount.value=Math.round(100*parseFloat(eval(resultCalc.innerHTML)))/100}function removeLastElem(){"keyboard keyboard_active"!==keyboard.className&&(resultCalc.innerHTML=resultCalc.innerHTML.slice(0,-1),inputValidation(),convertCurrencies()),"keyboard keyboard_active"===keyboard.className&&(amount.value=amount.value.slice(0,-1),inputValidation(),convertCurrencies())}function cleanCalculator(){resultCalc.innerHTML=""}getKeyboardValues(),inputValidation(),document.querySelector(".keyboard__equal").addEventListener("click",calculateTotal),document.querySelector(".keyboard__delete").addEventListener("click",removeLastElem),document.querySelector(".keyboard__clean").addEventListener("click",cleanCalculator);const switchFn=()=>{toggleCalcToConvert()};function toggleCalcToConvert(){calcBtn.classList.toggle("switch-to__active"),convertBtn.classList.toggle("switch-to__active"),keyboard.classList.toggle("keyboard_active"),form.classList.toggle("form_active"),convertCurrencies()}const calcBtn=document.querySelector(".switch-to__calc"),convertBtn=document.querySelector(".switch-to__convert"),keyboard=document.querySelector(".keyboard"),form=document.querySelector(".form");document.querySelector(".switch-to__calc").addEventListener("click",switchFn),document.querySelector(".switch-to__convert").addEventListener("click",switchFn);const url="https://cdn.cur.su/api/latest.json",from=document.querySelector(".form__from-input"),to=document.querySelector(".form__to-input"),fromDescr=document.querySelector(".form__from-descr"),toDescr=document.querySelector(".form__to-descr");let fromFlag=!1,toFlag=!1,amountFlag=!0,mainData={descr:{AED:"United Arab Emirates dirham",AFN:"Afghan afghani",ALL:"Albanian lek",AMD:"Armenian dram",ANG:"Netherlands Antillean guilder",AOA:"Angolan kwanza",ARS:"Argentine peso",AUD:"Australian dollar",AWG:"Aruban florin",AZN:"Azerbaijan Manat",BAM:"Bosnia and Herzegovina convertible mark",BBD:"Barbadian dollar",BDT:"Bangladeshi taka",BGN:"Bulgarian lev",BHD:"Bahraini dinar",BIF:"Burundian franc",BMD:"Bermudian dollar",BND:"Brunei dollar",BOB:"Bolivian boliviano",BRL:"Brazilian real",BSD:"Bahamian dollar",BTC:"Bitcoin",BTN:"Bhutanese ngultrum",BTS:"BitShares",BWP:"Botswana pula",BYN:"Belarusian Ruble",BZD:"Belize dollar",CAD:"Canadian dollar",CDF:"Congolese franc",CHF:"Swiss franc",CLF:"Unidad de Fomento",CLP:"Chilean peso",CNH:"Chinese yuan",CNY:"Chinese Yuan Renminbi",COP:"Colombian peso",CRC:"Costa Rican colón",CUC:"Cuban convertible peso",CUP:"Cuban peso",CVE:"Cape Verdean escudo",CZK:"Czech koruna",DASH:"Digital Cash",DJF:"Djiboutian franc",DKK:"Danish krone",DOGE:"Dogecoin",DOP:"Dominican peso",DZD:"Algerian Dinar",EGP:"Egyptian Pound",ERN:"Eritrean nakfa",ETB:"Ethiopian birr",ETH:"Ethereum",EUR:"Euro",FJD:"Fijian dollar",FKP:"Falkland Islands pound",GBP:"British pound sterling",GEL:"Georgian Lari",GGP:"Guernsey pound",GHS:"Ghanaian cedi",GIP:"Gibraltar pound",GMD:"Gambian dalasi",GNF:"Guinean franc",GTQ:"Guatemalan quetzal",GYD:"Guyanese dollar",HKD:"Hong Kong dollar",HNL:"Honduran lempira",HRK:"Croatian kuna",HTG:"Haitian gourde",HUF:"Hungarian forint",IDR:"Indonesian rupiah",ILS:"Israeli new shekel",IMP:"Isle of Man Pound",INR:"Indian rupee",IQD:"Iraqi dinar",IRR:"Iranian rial",ISK:"Icelandic króna",JEP:"Jersey Pound",JMD:"Jamaican dollar",JOD:"Jordanian dinar",JPY:"Japanese Yen",KES:"Kenyan Shilling",KGS:"Kyrgyzstani som",KHR:"Cambodian riel",KMF:"Comorian Franc",KPW:"North Korean Won",KRW:"South Korean won",KWD:"Kuwaiti dinar",KYD:"Cayman Islands dollar",KZT:"Kazakhstani Tenge",LAK:"Lao Kips",LBP:"Lebanese pound",LD:"Linden Dollar",LKR:"Sri Lankan rupee",LRD:"Liberian dollar",LSL:"Lesotho Loti",LTC:"Litecoin",LYD:"Libyan dinar",MAD:"Moroccan dirham",MDL:"Moldovan leu",MGA:"Malagasy ariary",MKD:"Macedonian Denar",MMK:"Myanmar kyat",MNT:"Mongolian Tughrik",MOP:"Macanese pataca",MRO:"Mauritanian ouguiya",MRU:"Mauritanian ouguiya",MUR:"Mauritian rupee",MVR:"Maldivian rufiyaa",MWK:"Malawian kwacha",MXN:"Mexican peso",MYR:"Malaysian ringgit",MZN:"Mozambican metical",NAD:"Namibian dollar",NGN:"Nigerian naira",NIO:"Nicaraguan Cordoba",NOK:"Norwegian krone",NPR:"Nepalese rupee",NXT:"Nxt Monetary System",NZD:"New Zealand dollar",OMR:"Omani rial",PAB:"Panamanian balboa",PEN:"Peruvian Sol",PGK:"Papua New Guinean kina",PHP:"Philippine peso",PKR:"Pakistani rupee",PLN:"Polish Zloty",PYG:"Paraguayan guaraní",QAR:"Qatari riyal",RON:"Romanian leu",RSD:"Serbian dinar",RUB:"Putin Khuilo",RWF:"Rwandan franc",SAR:"Saudi riyal",SBD:"Solomon Islands dollar",SCR:"Seychellois Rupee",SDG:"Sudanese pound",SEK:"Swedish krona",SGD:"Singapore dollar",SHP:"Saint Helena pound",SLL:"Sierra Leonean leone",SOS:"Somali shilling",SRD:"Surinamese dollar",SSP:"South Sudanese pound",STD:"São Tomé and Príncipe dobra",STN:"São Tomé and Príncipe dobra",STR:"Stellar",SVC:"Salvadoran colón",SYP:"Syrian pound",SZL:"Swazi Lilangeni",THB:"Thai baht",TJS:"Tajikistani somoni",TMT:"Turkmenistani manat",TND:"Tunisian dinar",TOP:"Tongan Pa'anga flag",TRY:"Turkish lira",TTD:"Trinidad and Tobago dollar",TWD:"New Taiwan dollar",TZS:"Tanzanian shilling",UAH:"Ukrainian Hryvnia",UGX:"Ugandan shilling",USD:"United States Dollar",UYU:"Uruguayan Peso",UZS:"Uzbekistani soum",VEF_BLKMKT:"-",VEF_DICOM:"-",VEF_DIPRO:"-",VES:"Venezuelan bolívar",VND:"Vietnamese Dong",VUV:"Vanuatu vatu",WST:"Samoan tālā",XAF:"Central African CFA franc",XAG:"Ounce of silver",XAU:"Ounce of gold",XCD:"Eastern Caribbean dollar",XDR:"Special Drawing Rights",XMR:"Monero",XOF:"West African CFA franc",XPD:"Ounce of palladium",XPF:"CFP Franc",XPT:"Ounce of platinum",XRP:"Ripple",YER:"Yemeni Rial",ZAR:"South African rand",ZMW:"Zambian kwacha",ZWL:"Zimbabwean dollar",NMC:"Namecoin",PPC:"Peercoin",NVC:"Novacoin",XPM:"Primecoin",EAC:"East African coin",VTC:"Vertcoin",EMC:"EmerCoin",FCT:"Factom"}};const getData=async a=>{const e=await fetch(a);return await e.json()},fetchData=async()=>{try{const a=await getData(url);mainData.rates=a.rates}catch(a){console.log(a.message)}};fetchData();const fromHandler=()=>{const a=document.querySelector(".form__from-descr"),e=from.value=from.value.toUpperCase();Object.keys(mainData.rates).map(a=>a).includes(e)?(from.style.backgroundImage=`url('images/flags/${e.toLowerCase()}.svg')`,fromDescr.innerHTML=e,a.innerHTML=mainData.descr[e],fromFlag=!0,convertCurrencies()):(from.style.backgroundImage="none",0===e.length?fromDescr.innerHTML="Enter a currency":fromDescr.innerHTML=e+" currency doesn't exist",fromFlag=!1,result.innerHTML=0)},toHandler=()=>{const a=document.querySelector(".form__to-descr"),e=to.value=to.value.toUpperCase();Object.keys(mainData.rates).map(a=>a).includes(e)?(to.style.backgroundImage=`url('images/flags/${e.toLowerCase()}.svg')`,toDescr.innerHTML=e,a.innerHTML=mainData.descr[e],toFlag=!0,convertCurrencies()):(to.style.backgroundImage="none",0===e.length?toDescr.innerHTML="Expecting format - 'USD'":toDescr.innerHTML=e+" currency doesn't exist",toFlag=!1,result.innerHTML=0)},amountHandler=()=>{amount.value.length?(amountFlag=!0,convertCurrencies()):amountFlag=!1},convertCurrencies=()=>{if(fromFlag&&toFlag&&amountFlag){const a=mainData.rates[to.value]/mainData.rates[from.value]*amount.value;convertResult.innerHTML=Math.floor(100*a)/100}};document.querySelector(".form__amount").addEventListener("input",amountHandler),document.querySelector(".form__from-input").addEventListener("input",fromHandler),document.querySelector(".form__to-input").addEventListener("input",toHandler);