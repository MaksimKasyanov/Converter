document.querySelector(".keyboard__clean").addEventListener("click",cleanCalculator),document.querySelector(".keyboard__delete").addEventListener("click",removeLastElem),document.querySelector(".keyboard__total").addEventListener("click",calculateTotal);const calculatorButtons=document.querySelectorAll(".keyboard .keyboard__number"),numbers=document.querySelectorAll(".keyboard .keyboard__number"),operators=document.querySelectorAll(".keyboard .keyboard__operator"),output=document.querySelector(".form__amount"),dotBtn=document.querySelector(".keyboard__dot"),dotClick=document.querySelector(".keyboard__dot").addEventListener("click",dotClicked);let numberStr="",mainStr="",mainArr=[],numberFlag=!1,operatorFlag=!1,dotFlag=!1;output.value="0";for(let a=0;a<calculatorButtons.length;a++){function calculatorButtonsActive(){this.classList.add("keyboard__number_active"),setTimeout(()=>{this.classList.remove("keyboard__number_active")},350)}calculatorButtons[a].addEventListener("mousedown",calculatorButtonsActive)}function dotClicked(){dotBtn.setAttribute("disabled","")}function numberClick(){for(let a=0;a<numbers.length;a++)numbers[a].addEventListener("click",numberAction);for(let a=0;a<operators.length;a++)operators[a].addEventListener("click",operatorAction)}function numberAction(){!1===numberFlag?(operatorFlag=!1,mainArr.push(this.value),console.log(mainArr),numberFlag=!0,mainStr=mainArr.join(""),output.value=mainStr):(mainArr[mainArr.length-1]+=this.value,mainStr=mainArr.join(""),output.value=mainStr,console.log(mainArr))}function operatorAction(){mainArr.length%2!=0?(numberFlag=!1,operatorFlag=!0,mainArr.push(this.value),console.log(mainArr),mainStr=mainArr.join(""),output.value=mainStr,dotBtn.removeAttribute("disabled","")):(mainArr.pop(),mainArr.push(this.value),console.log(this.value),console.log(mainArr),mainStr=mainArr.join(""),output.value=mainStr,dotBtn.removeAttribute("disabled",""))}function cleanCalculator(){numberStr="",mainStr="",mainArr=[],numberFlag=!1,operatorFlag=!1,dotFlag=!1,output.value=mainStr}function removeLastElem(){mainArr.pop(),numberFlag=!1,operatorFlag=!1,mainStr=mainArr.join(""),output.value=mainStr,console.log(mainArr)}function calculateTotal(){if(mainArr.length%2!=0){for(i=0;i<mainArr.length;i++)"*"!==mainArr[i]&&"/"!==mainArr[i]||("*"===mainArr[i]?(a=mainArr[mainArr.indexOf(mainArr[i])-1],b=mainArr[mainArr.indexOf(mainArr[i])+1],mainArr[mainArr.indexOf(mainArr[i])-1]=a*b,mainArr.splice(mainArr.indexOf(mainArr[i])+1,1),mainArr.splice(mainArr.indexOf(mainArr[i]),1),console.log(mainArr)):(a=mainArr[mainArr.indexOf(mainArr[i])-1],b=mainArr[mainArr.indexOf(mainArr[i])+1],mainArr[mainArr.indexOf(mainArr[i])-1]=a/b,mainArr.splice(mainArr.indexOf(mainArr[i])+1,1),mainArr.splice(mainArr.indexOf(mainArr[i]),1),console.log(mainArr)));mainStr=mainArr.join(""),mainArr=[],mainArr.push(eval(mainStr)),mainStr=mainArr.join(""),output.value=mainStr,console.log(eval(mainArr)),console.log(eval(mainStr))}else alert("The example is not complete")}numberClick();const toConvertation=()=>{toggleCalcToConvert()},toCalculation=()=>{toggleCalcToConvert()};function toggleCalcToConvert(){calcBtn.classList.toggle("switch-to__active"),convertBtn.classList.toggle("switch-to__active"),keyboardRight.classList.toggle("keyboard__right_active"),keyboardLeft.classList.toggle("keyboard__left_active")}const calcBtn=document.querySelector(".switch-to__calc"),convertBtn=document.querySelector(".switch-to__convert"),keyboardLeft=document.querySelector(".keyboard__left"),keyboardRight=document.querySelector(".keyboard__right");document.querySelector(".switch-to__calc").addEventListener("click",toCalculation),document.querySelector(".switch-to__convert").addEventListener("click",toConvertation);const url="https://cdn.cur.su/api/latest.json",from=document.querySelector(".form__from-input"),to=document.querySelector(".form__to-input"),fromDescr=document.querySelector(".form__from-descr"),toDescr=document.querySelector(".form__to-descr"),amount=document.querySelector(".form__amount"),result=document.querySelector(".form__result");let fromFlag=!1,toFlag=!1,amountFlag=!0,mainData={descr:{AED:"United Arab Emirates dirham",AFN:"Afghan afghani",ALL:"Albanian lek",AMD:"Armenian dram",ANG:"Netherlands Antillean guilder",AOA:"Angolan kwanza",ARS:"Argentine peso",AUD:"Australian dollar",AWG:"Aruban florin",AZN:"Azerbaijan Manat",BAM:"Bosnia and Herzegovina convertible mark",BBD:"Barbadian dollar",BDT:"Bangladeshi taka",BGN:"Bulgarian lev",BHD:"Bahraini dinar",BIF:"Burundian franc",BMD:"Bermudian dollar",BND:"Brunei dollar",BOB:"Bolivian boliviano",BRL:"Brazilian real",BSD:"Bahamian dollar",BTC:"Bitcoin",BTN:"Bhutanese ngultrum",BTS:"BitShares",BWP:"Botswana pula",BYN:"Belarusian Ruble",BZD:"Belize dollar",CAD:"Canadian dollar",CDF:"Congolese franc",CHF:"Swiss franc",CLF:"Unidad de Fomento",CLP:"Chilean peso",CNH:"Chinese yuan",CNY:"Chinese Yuan Renminbi",COP:"Colombian peso",CRC:"Costa Rican colón",CUC:"Cuban convertible peso",CUP:"Cuban peso",CVE:"Cape Verdean escudo",CZK:"Czech koruna",DASH:"Digital Cash",DJF:"Djiboutian franc",DKK:"Danish krone",DOGE:"Dogecoin",DOP:"Dominican peso",DZD:"Algerian Dinar",EGP:"Egyptian Pound",ERN:"Eritrean nakfa",ETB:"Ethiopian birr",ETH:"Ethereum",EUR:"Euro",FJD:"Fijian dollar",FKP:"Falkland Islands pound",GBP:"British pound sterling",GEL:"Georgian Lari",GGP:"Guernsey pound",GHS:"Ghanaian cedi",GIP:"Gibraltar pound",GMD:"Gambian dalasi",GNF:"Guinean franc",GTQ:"Guatemalan quetzal",GYD:"Guyanese dollar",HKD:"Hong Kong dollar",HNL:"Honduran lempira",HRK:"Croatian kuna",HTG:"Haitian gourde",HUF:"Hungarian forint",IDR:"Indonesian rupiah",ILS:"Israeli new shekel",IMP:"Isle of Man Pound",INR:"Indian rupee",IQD:"Iraqi dinar",IRR:"Iranian rial",ISK:"Icelandic króna",JEP:"Jersey Pound",JMD:"Jamaican dollar",JOD:"Jordanian dinar",JPY:"Japanese Yen",KES:"Kenyan Shilling",KGS:"Kyrgyzstani som",KHR:"Cambodian riel",KMF:"Comorian Franc",KPW:"North Korean Won",KRW:"South Korean won",KWD:"Kuwaiti dinar",KYD:"Cayman Islands dollar",KZT:"Kazakhstani Tenge",LAK:"Lao Kips",LBP:"Lebanese pound",LD:"Linden Dollar",LKR:"Sri Lankan rupee",LRD:"Liberian dollar",LSL:"Lesotho Loti",LTC:"Litecoin",LYD:"Libyan dinar",MAD:"Moroccan dirham",MDL:"Moldovan leu",MGA:"Malagasy ariary",MKD:"Macedonian Denar",MMK:"Myanmar kyat",MNT:"Mongolian Tughrik",MOP:"Macanese pataca",MRO:"Mauritanian ouguiya",MRU:"Mauritanian ouguiya",MUR:"Mauritian rupee",MVR:"Maldivian rufiyaa",MWK:"Malawian kwacha",MXN:"Mexican peso",MYR:"Malaysian ringgit",MZN:"Mozambican metical",NAD:"Namibian dollar",NGN:"Nigerian naira",NIO:"Nicaraguan Cordoba",NOK:"Norwegian krone",NPR:"Nepalese rupee",NXT:"Nxt Monetary System",NZD:"New Zealand dollar",OMR:"Omani rial",PAB:"Panamanian balboa",PEN:"Peruvian Sol",PGK:"Papua New Guinean kina",PHP:"Philippine peso",PKR:"Pakistani rupee",PLN:"Polish Zloty",PYG:"Paraguayan guaraní",QAR:"Qatari riyal",RON:"Romanian leu",RSD:"Serbian dinar",RUB:"Putin Khuilo",RWF:"Rwandan franc",SAR:"Saudi riyal",SBD:"Solomon Islands dollar",SCR:"Seychellois Rupee",SDG:"Sudanese pound",SEK:"Swedish krona",SGD:"Singapore dollar",SHP:"Saint Helena pound",SLL:"Sierra Leonean leone",SOS:"Somali shilling",SRD:"Surinamese dollar",SSP:"South Sudanese pound",STD:"São Tomé and Príncipe dobra",STN:"São Tomé and Príncipe dobra",STR:"Stellar",SVC:"Salvadoran colón",SYP:"Syrian pound",SZL:"Swazi Lilangeni",THB:"Thai baht",TJS:"Tajikistani somoni",TMT:"Turkmenistani manat",TND:"Tunisian dinar",TOP:"Tongan Pa'anga flag",TRY:"Turkish lira",TTD:"Trinidad and Tobago dollar",TWD:"New Taiwan dollar",TZS:"Tanzanian shilling",UAH:"Ukrainian Hryvnia",UGX:"Ugandan shilling",USD:"United States Dollar",UYU:"Uruguayan Peso",UZS:"Uzbekistani soum",VEF_BLKMKT:"-",VEF_DICOM:"-",VEF_DIPRO:"-",VES:"Venezuelan bolívar",VND:"Vietnamese Dong",VUV:"Vanuatu vatu",WST:"Samoan tālā",XAF:"Central African CFA franc",XAG:"Ounce of silver",XAU:"Ounce of gold",XCD:"Eastern Caribbean dollar",XDR:"Special Drawing Rights",XMR:"Monero",XOF:"West African CFA franc",XPD:"Ounce of palladium",XPF:"CFP Franc",XPT:"Ounce of platinum",XRP:"Ripple",YER:"Yemeni Rial",ZAR:"South African rand",ZMW:"Zambian kwacha",ZWL:"Zimbabwean dollar",NMC:"Namecoin",PPC:"Peercoin",NVC:"Novacoin",XPM:"Primecoin",EAC:"East African coin",VTC:"Vertcoin",EMC:"EmerCoin",FCT:"Factom"}};const getData=async a=>{const n=await fetch(a);return await n.json()},fetchData=async()=>{try{const a=await getData(url);mainData.rates=a.rates}catch(a){console.log(a.message)}};fetchData();const fromHandler=()=>{const a=document.querySelector(".form__from-descr"),n=from.value=from.value.toUpperCase();Object.keys(mainData.rates).map(a=>a).includes(n)?(from.style.backgroundImage=`url('images/flags/${n.toLowerCase()}.svg')`,fromDescr.innerHTML=n,a.innerHTML=mainData.descr[n],fromFlag=!0,convertCurrencies()):(from.style.backgroundImage="none",0===n.length?fromDescr.innerHTML="Enter a currency":fromDescr.innerHTML=n+" currency doesn't exist",fromFlag=!1,result.innerHTML=0)},toHandler=()=>{const a=document.querySelector(".form__to-descr"),n=to.value=to.value.toUpperCase();Object.keys(mainData.rates).map(a=>a).includes(n)?(to.style.backgroundImage=`url('images/flags/${n.toLowerCase()}.svg')`,toDescr.innerHTML=n,a.innerHTML=mainData.descr[n],toFlag=!0,convertCurrencies()):(to.style.backgroundImage="none",0===n.length?toDescr.innerHTML="Enter a currency":toDescr.innerHTML=n+" currency doesn't exist",toFlag=!1,result.innerHTML=0)},amountHandler=()=>{amount.value.length?(amountFlag=!0,convertCurrencies()):amountFlag=!1},convertCurrencies=()=>{if(fromFlag&&toFlag&&amountFlag){const a=mainData.rates[to.value]/mainData.rates[from.value]*amount.value;result.innerHTML=Math.floor(100*a)/100}};document.querySelector(".form__amount").addEventListener("input",amountHandler),document.querySelector(".form__from-input").addEventListener("input",fromHandler),document.querySelector(".form__to-input").addEventListener("input",toHandler);